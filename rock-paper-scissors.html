<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>The Odin Project - Rock Paper Scissors</title>
    </head>
    <body>
        <script>

            let playerSelection = "";
            let computerSelection = "";

            let finalResult = game();
            console.log(finalResult);
            alert(finalResult);

            // SINGLE ROUND


            function playRound(playerSelection, computerSelection) {
                let playerSelectionLowercase = playerSelection.toLowerCase();
                if (playerSelectionLowercase === computerSelection) {
                    return "You both chose " + playerSelectionLowercase + ", play again!";
                } else if (playerSelectionLowercase === "rock" && computerSelection === "paper") {
                    return "You Lose! Paper beats Rock!";
                } else if (playerSelectionLowercase === "rock" && computerSelection === "scissors") {
                    return "You Win! Rock beats Scissors!";
                } else if (playerSelectionLowercase === "paper" && computerSelection === "rock") {
                    return "You Win! Paper beats Rock!";
                } else if (playerSelectionLowercase === "paper" && computerSelection === "scissors") {
                    return "You Lose! Scissors beats Paper!";
                } else if (playerSelectionLowercase === "scissors" && computerSelection === "rock") {
                    return "You Lose! Rock beats Scissors!";
                } else if (playerSelectionLowercase === "scissors" && computerSelection === "paper") {
                    return "You Win! Scissors beats Paper!";
                }

            }

            // COMPUTER PLAY

            function computerPlay() {
                let computerValue = Math.floor(Math.random() * 3) + 1;
                // convert valye to rock, paper or scissors
                switch (computerValue) {
                    case 1:
                        return "rock";
                    case 2:
                        return "paper";
                    default: 
                        return "scissors";
                }
            }

            // MAIN GAME

            function game() {
                let playerScore = 0;
                let computerScore = 0;
                let count = 1;

                while (count <= 5) {
                    playerSelection = prompt("Game Number: " + count + "\nRock, Paper or Scissors?");
                    computerSelection = computerPlay();
                    let gameResult = playRound(playerSelection, computerSelection);
                    alert(gameResult);
                    if (gameResult.charAt(4) === "b") {
                        continue;
                    } else if (gameResult.charAt(4) === "W") {
                        playerScore++;
                    } else if (gameResult.charAt(4) === "L") {
                        computerScore++;
                    }
                    count++;
                }

                if (playerScore > computerScore) {
                    return "You Win! Player: " + playerScore + " Computer: " + computerScore;
                } else if (playerScore < computerScore) {
                    return "You Lose! Player: " + playerScore + " Computer: " + computerScore;
                } else {
                    return "You Draw! Player: " + playerScore + " Computer: " + computerScore;
                }
            }

        </script>
    </body>
</html>